<!DOCTYPE html>
<html data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>typing or reading</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="icon" href="/assets/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
</head>

<body>

    <article id="type"></article>

    <script src="../assets/js/typing.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
    <script>
        var speed = 200; //in milliseconds, 80ms per character
        var loop_wait = 1; //in second, 1s pause after typing;
        // search example: <you_url>?txt=Hello,%20world!%20I%27m%20just%20typing%20here%20to%20see%20how%20it%20works.&sp=100&lw=3
        const urlParams = new URLSearchParams(window.location.search);
        let texts = urlParams.get('txt');
        if (texts == undefined || texts == null || texts == "") {
            texts = "# 《诗经・郑风・子衿》\n青青子衿，悠悠我心。纵我不往，子宁不嗣音？\n青青子佩，悠悠我思。纵我不往，子宁不来？\n挑兮达兮，在城阙兮。一日不见，如三月兮。";
        }
        let markdown_file = urlParams.get('md');
        if (urlParams.get('sp') != undefined && urlParams.get('sp') != null && urlParams.get('sp') != "") {
            try {
                speed = parseInt(urlParams.get('sp'));
                speed = isNaN(speed) ? 80 : speed;
            }
            catch (err) {
                console.log(err);
            }
        }
        if (urlParams.get('lw') != undefined && urlParams.get('lw') != null && urlParams.get('lw') != "") {
            try {
                loop_wait = parseInt(urlParams.get('lw'));
                loop_wait = isNaN(loop_wait) ? 1 : loop_wait;
            }
            catch (err) {
                console.log(err);
            }
        }
        if (markdown_file != undefined && markdown_file != null && markdown_file != "") {
            fetch(markdown_file)
                .then(response => response.text())
                .then(data => {
                    // 解析Markdown文本
                    const markdown = data;
                    const txt_list = markdown.split("\n");
                    switchCenterTheme(txt_list);
                    typingMarkdownTexts(txt_list, 0);
                })
                .catch(error => console.error(error));
        } else {
            if (texts != undefined || texts != null || texts != "") {
                txt_list = texts.split("\n");
                switchCenterTheme(txt_list);
                typingMarkdownTexts(txt_list, 0);
            }
        }
    </script>

</body>

</html>